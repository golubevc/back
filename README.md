# Anecole Backend

Spring Boot –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã Anecole.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Java 22+
- Maven 3.6+

### –ó–∞–ø—É—Å–∫
```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git clone <repository-url>
cd back

# –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
./mvnw spring-boot:run
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: `http://localhost:8080`

## üìä –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –ú–∏–≥—Ä–∞—Ü–∏–∏
–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç SQL –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ö–µ–º–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:

- `V1__update_existing_data.sql` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- `V2__add_test_administrators.sql` - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
- `V3__add_test_data.sql` - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö:

- **22 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**: 10 —Å—Ç—É–¥–µ–Ω—Ç–æ–≤, 8 —É—á–∏—Ç–µ–ª–µ–π, 4 –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- **9 –∫–ª–∞—Å—Å–æ–≤** —Å —Ä–∞–∑–Ω—ã–º–∏ –ø—Ä–µ–¥–º–µ—Ç–∞–º–∏
- **11 —É—Ä–æ–∫–æ–≤** —Å –ø–æ–ª–Ω—ã–º –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º
- **32 —Å–ª–æ–≤–∞** —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∏ –ø—Ä–æ–∏–∑–Ω–æ—à–µ–Ω–∏–µ–º
- **–ü—Ä–æ–≥—Ä–µ—Å—Å —Å—Ç—É–¥–µ–Ω—Ç–æ–≤** –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

## üë• –¢–µ—Å—Ç–æ–≤—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã

### –û—Å–Ω–æ–≤–Ω—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã
- **–°—Ç—É–¥–µ–Ω—Ç**: `student1` / `password`
- **–£—á–∏—Ç–µ–ª—å**: `teacher1` / `password`
- **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä**: `admin` / `password`

### –í—Å–µ –∞–∫–∫–∞—É–Ω—Ç—ã
–ü–æ–¥—Ä–æ–±–Ω—ã–π —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤—ã—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤ —Å–º. –≤ [TEST_ACCOUNTS.md](TEST_ACCOUNTS.md)

## üîß API Endpoints

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- `POST /api/auth/login` - –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É
- `POST /api/auth/register` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- `POST /api/auth/validate` - –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–∞

### –°—Ç—É–¥–µ–Ω—Ç—ã
- `GET /api/students` - –í—Å–µ —Å—Ç—É–¥–µ–Ω—Ç—ã
- `GET /api/students/{id}` - –°—Ç—É–¥–µ–Ω—Ç –ø–æ ID
- `GET /api/students/{id}/classes` - –ö–ª–∞—Å—Å—ã —Å—Ç—É–¥–µ–Ω—Ç–∞
- `GET /api/students/{id}/lessons` - –£—Ä–æ–∫–∏ —Å—Ç—É–¥–µ–Ω—Ç–∞
- `GET /api/students/{id}/progress` - –ü—Ä–æ–≥—Ä–µ—Å—Å —Å—Ç—É–¥–µ–Ω—Ç–∞
- `POST /api/students/{studentId}/progress/word/{wordId}` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞

### –£—á–∏—Ç–µ–ª—è
- `GET /api/teachers` - –í—Å–µ —É—á–∏—Ç–µ–ª—è
- `GET /api/teachers/{id}/classes` - –ö–ª–∞—Å—Å—ã —É—á–∏—Ç–µ–ª—è
- `POST /api/teachers/classes` - –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞—Å—Å–∞
- `PUT /api/teachers/classes/{id}` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–ª–∞—Å—Å–∞
- `DELETE /api/teachers/classes/{id}` - –£–¥–∞–ª–µ–Ω–∏–µ –∫–ª–∞—Å—Å–∞

### –ö–ª–∞—Å—Å—ã
- `GET /api/classes` - –í—Å–µ –∫–ª–∞—Å—Å—ã
- `GET /api/classes/{id}` - –ö–ª–∞—Å—Å –ø–æ ID
- `GET /api/classes/teacher/{teacherId}` - –ö–ª–∞—Å—Å—ã —É—á–∏—Ç–µ–ª—è
- `GET /api/classes/student/{studentId}` - –ö–ª–∞—Å—Å—ã —Å—Ç—É–¥–µ–Ω—Ç–∞
- `POST /api/classes` - –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞—Å—Å–∞
- `PUT /api/classes/{id}` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–ª–∞—Å—Å–∞
- `DELETE /api/classes/{id}` - –£–¥–∞–ª–µ–Ω–∏–µ –∫–ª–∞—Å—Å–∞

### –£—Ä–æ–∫–∏
- `GET /api/lessons` - –í—Å–µ —É—Ä–æ–∫–∏
- `GET /api/lessons/{id}` - –£—Ä–æ–∫ –ø–æ ID
- `GET /api/lessons/class/{classId}` - –£—Ä–æ–∫–∏ –∫–ª–∞—Å—Å–∞
- `GET /api/lessons/{lessonId}/words` - –°–ª–æ–≤–∞ —É—Ä–æ–∫–∞
- `POST /api/lessons` - –°–æ–∑–¥–∞–Ω–∏–µ —É—Ä–æ–∫–∞
- `PUT /api/lessons/{id}` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —É—Ä–æ–∫–∞
- `DELETE /api/lessons/{id}` - –£–¥–∞–ª–µ–Ω–∏–µ —É—Ä–æ–∫–∞

### –°–ª–æ–≤–∞
- `GET /api/words` - –í—Å–µ —Å–ª–æ–≤–∞
- `GET /api/words/search` - –ü–æ–∏—Å–∫ —Å–ª–æ–≤
- `GET /api/words/lesson/{lessonId}` - –°–ª–æ–≤–∞ —É—Ä–æ–∫–∞
- `POST /api/words` - –°–æ–∑–¥–∞–Ω–∏–µ —Å–ª–æ–≤–∞
- `PUT /api/words/{id}` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ª–æ–≤–∞
- `DELETE /api/words/{id}` - –£–¥–∞–ª–µ–Ω–∏–µ —Å–ª–æ–≤–∞

### –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —É—Ä–æ–∫–æ–≤
- `POST /api/lesson-builder/create` - –°–æ–∑–¥–∞–Ω–∏–µ —É—Ä–æ–∫–∞
- `PUT /api/lesson-builder/{lessonId}` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —É—Ä–æ–∫–∞
- `POST /api/lesson-builder/{lessonId}/publish` - –ü—É–±–ª–∏–∫–∞—Ü–∏—è —É—Ä–æ–∫–∞
- `GET /api/lesson-builder/teacher/{teacherId}/drafts` - –ß–µ—Ä–Ω–æ–≤–∏–∫–∏ —É—á–∏—Ç–µ–ª—è
- `GET /api/lesson-builder/student/{studentId}/lessons` - –£—Ä–æ–∫–∏ —Å—Ç—É–¥–µ–Ω—Ç–∞

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### JWT –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- –¢–æ–∫–µ–Ω—ã JWT –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –†–æ–ª–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ (STUDENT, TEACHER, ADMIN)
- –ó–∞—â–∏—â–µ–Ω–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Å @PreAuthorize

### CORS
–ù–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º –Ω–∞ `http://localhost:3000`

## üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç SLF4J –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:
- –õ–æ–≥–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –õ–æ–≥–∏ API –∑–∞–ø—Ä–æ—Å–æ–≤
- –õ–æ–≥–∏ –æ—à–∏–±–æ–∫

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Unit —Ç–µ—Å—Ç—ã
```bash
./mvnw test
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
```bash
./mvnw verify
```

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [API Documentation](API_DOCUMENTATION.md) - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API
- [Test Accounts](TEST_ACCOUNTS.md) - –°–ø–∏—Å–æ–∫ —Ç–µ—Å—Ç–æ–≤—ã—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤
- [Integration Guide](../front-mono/INTEGRATION.md) - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –°–ª–æ–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **Controllers** - REST API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
- **Services** - –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
- **Repositories** - –î–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º
- **Models** - –°—É—â–Ω–æ—Å—Ç–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- **DTOs** - –û–±—ä–µ–∫—Ç—ã –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö
- **Security** - JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- **AuthService** - –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- **StudentService** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—É–¥–µ–Ω—Ç–∞–º–∏
- **TeacherService** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–∏—Ç–µ–ª—è–º–∏
- **ClassService** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∞—Å—Å–∞–º–∏
- **LessonService** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—Ä–æ–∫–∞–º–∏
- **WordService** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ª–æ–≤–∞–º–∏
- **LessonBuilderService** - –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —É—Ä–æ–∫–æ–≤

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏–∏

### –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏
1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª –≤ `src/main/resources/db/migration/`
2. –ò–º–µ–Ω—É–π—Ç–µ —Ñ–∞–π–ª –ø–æ —Å—Ö–µ–º–µ: `V{–Ω–æ–º–µ—Ä}__{–æ–ø–∏—Å–∞–Ω–∏–µ}.sql`
3. –î–æ–±–∞–≤—å—Ç–µ SQL –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ö–µ–º—ã –∏–ª–∏ –¥–∞–Ω–Ω—ã—Ö

### –ü—Ä–∏–º–µ—Ä –º–∏–≥—Ä–∞—Ü–∏–∏
```sql
-- V4__add_new_feature.sql
ALTER TABLE users ADD COLUMN phone VARCHAR(20);
INSERT INTO users (username, email, password, role) 
VALUES ('newuser', 'new@example.com', '$2a$10$...', 'STUDENT');
```

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
```bash
./mvnw spring-boot:run
```

### –ü—Ä–æ–¥–∞–∫—à–Ω
```bash
./mvnw clean package
java -jar target/anecole-0.0.1-SNAPSHOT.jar
```

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–î–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ issues –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞. 